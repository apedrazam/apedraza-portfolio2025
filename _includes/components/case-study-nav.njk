{%- set currentOrder = order -%}
{%- set allCaseStudies = collections.caseStudies | sort(false, 'order') -%}
{%- set currentIndex = allCaseStudies | findIndex("order", currentOrder) -%}

{%- set prevStudy = (currentIndex > 0) and allCaseStudies[currentIndex - 1] or null -%}
{%- set nextStudy = (currentIndex < (allCaseStudies | length - 1)) and allCaseStudies[currentIndex + 1] or null -%}

<div class="case-study-nav">
  {%- if prevStudy -%}
    <a href="{{ prevStudy.url }}" class="case-study-nav-link prev">
      <span class="case-study-nav-title">{{ prevStudy.data.title }}</span>
    </a>
  {%- endif -%}

  {%- if nextStudy -%}
    <a href="{{ nextStudy.url }}" class="case-study-nav-link next">
      <span class="case-study-nav-title">{{ nextStudy.data.title }}</span>
    </a>
  {%- endif -%}
</div>
